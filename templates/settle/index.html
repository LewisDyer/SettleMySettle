{% extends 'settle/base.html' %}
{% load staticfiles %}

{% block style_block %}
    <!-- Import custom CSS here! -->
{% endblock %}

{% block title_block %}Home{% endblock %}

{% block body_block %}
    <!-- Code here! -->
    <div class="row infinite-container">
        {% for post in posts %}

            <div class="col-sm-4 infinite-item" align="center" style="padding-top:45px">
                <p class="col sm-4" style="background-color:#56c9ff;padding:2px;font-size:1.2vw">{{ post.author }}</p>
                <a href="{% url 'post' %}"><img class="img-fluid" style="height:150px;" src="{{ MEDIA_URL }}{{ post.picture }}" alt="pic"></a>
                <p>Game Tag: {{ post.game_tag }}</p>
                <p> |
                {% for tag in post.info_tags.all %}
                    {{ tag }} |
                {% endfor %}
                </p>
            </div>
            
            {% if forloop.counter|divisibleby:3 %}
                </div>
                <div class="row infinite-container">
            {%endif%}

        {% endfor %}
    </div>
    
      {% if posts.has_next %}
        <a class="infinite-more-link" href="?page={{ posts.next_page_number }}">More</a>
      {% endif %}
    
      <div class="loading" style="display: none;">
        Loading...
      </div>
    
{% endblock %}

{% block script_block %}
    <!-- Import custom JS here! -->
    <script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'js/infinite.min.js' %}"></script>
    <script>
        var infinite = new Waypoint.Infinite({
          element: $('.infinite-container')[0],
          onBeforePageLoad: function () {
            $('.loading').show();
          },
          onAfterPageLoad: function ($items) {
            $('.loading').hide();
          }
        });
      </script>
{% endblock %}