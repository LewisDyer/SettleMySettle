{% extends 'settle/base.html' %}
{% load staticfiles %}
{% load admintag %}

{% block style_block %}
<!-- Import custom CSS here! -->
{% endblock %}

{% block title_block %}Suggest Tag{% endblock %}

{% block body_block %}
<div class="page-title-div">
    <p class="page-title">Suggest a Tag.</p>
    Suggest a new info tag that could be used to describe a post.
</div>
<hr class="pb-1" style="width:70%" />

<div style="padding-top: 50px">
    <div style="border-style: solid;border-width: 1px;background-color: lightgray;padding: 20px;display: inline-block;"
        align="left">
        <form id="suggest-form" method="post" action="{% url 'tags' %}" enctype="multipart/form-data">
            {% csrf_token %}
            {{ suggest_form.as_p }}
            <input type="hidden" name="user" value="{{ user }}" />
            {% if request.user|has_group:"admin" %}
            <input type="hidden" name="type" value="approve" />
            <input type="submit" name="submit" value="Approve" />
            {% else %}
            <input type="hidden" name="type" value="suggest" />
            <input type="submit" name="submit" value="Suggest" />
            {% endif %}
        </form>
        <br />

        <p>Preview of your tag.</p>
        <span id="preview-tag" class="btn tag mb-1" style="background-color: #FFFF00">Your Text Here</span>
        <a id="preview-steam" href="https://store.steampowered.com/app/0" target="_blank"
            style="padding-left: 20px">Test Steam Link</a>
    </div>
</div>


<!-- Code for admin queue -->
{% if request.user|has_group:"admin" %}

{% if pending_tags %}
<table>
    <th>
    <td>Tag</td>
    <td>Steam Link</td>
    <td>Actions</td>
    </th>
    {% for tag in pending_tags %}
    <tr>
        <td id="{{ tag.colour }}{{ tag }}"><span class="btn tag mb-1"
                style="background-color:{{ tag.colour }}">{{ tag }}</span></td>
        <td id="{{ tag.steamAppId }}">{% if tag.steamAppId %}
            <a href="https://store.steampowered.com/app/{{ tag.steamAppId }}" target="_blank">{{ tag }}</a>
            {% endif %}</td>
        <td id={{ tag.is_game_tag }}><button class="btn btn-outline-secondary btn-sm" type="button" class="edit-tag"
                id="{{ tag }}">Edit</button></td>
        <td>
            <form id="del_form" method="post" action="{% url 'tags' %}" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="hidden" name="type" value="del" />
                <input type="hidden" name="tag" value="{{ tag.id }}" />
                <input class="btn btn-outline-danger btn-sm" type="submit" name="submit" value="Delete" />
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endif %}
{% endif %}


{% endblock %}

{% block script_block %}
<!-- Import custom JS here! -->
<script src="{% static "js/suggest_tag.js" %}"></script>
{% endblock %}